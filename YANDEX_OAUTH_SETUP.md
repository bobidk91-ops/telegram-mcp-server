# Yandex OAuth Setup - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã OAuth —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ MCP —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ –ö–æ–¥ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ GitHub
3. ‚úÖ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å Redirect URI –≤ Yandex

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://oauth.yandex.ru
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Client ID: `11221f6ebd2d47649d42d9f4b282a876`)
4. **–ò–∑–º–µ–Ω–∏—Ç–µ Redirect URI –Ω–∞:**
   ```
   https://worker-production-f73d.up.railway.app/yandex/callback
   ```
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å OAuth —Ç–æ–∫–µ–Ω

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Railway (–ø–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã):

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://worker-production-f73d.up.railway.app/yandex/auth
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `auth_url` –∏–∑ –æ—Ç–≤–µ—Ç–∞

3. –û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ

4. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø

5. –í–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ callback URL

6. –í—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "Yandex OAuth token obtained successfully!"

7. –ì–æ—Ç–æ–≤–æ! –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω ‚úÖ

**–í–∞—Ä–∏–∞–Ω—Ç B: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞**

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å —Ç–æ–∫–µ–Ω:

```bash
curl -X POST https://worker-production-f73d.up.railway.app/yandex/set-token \
  -H "Content-Type: application/json" \
  -d '{"token": "–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"}'
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

–û—Ç–∫—Ä–æ–π—Ç–µ:
```
https://worker-production-f73d.up.railway.app/yandex/status
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```json
{
  "client_id": "11221f6ebd2d47649d42d9f4b282a876",
  "token_set": true,
  "auth_url": "...",
  "callback_url": "..."
}
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health

–û—Ç–∫—Ä–æ–π—Ç–µ:
```
https://worker-production-f73d.up.railway.app/health
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```json
{
  ...
  "yandex_oauth": true
}
```

## üéØ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

–Ø –¥–æ–±–∞–≤–ª—é 5 Yandex Wordstat —Ñ—É–Ω–∫—Ü–∏–π:
1. `yandex_wordstat_search` - –ü–æ–∏—Å–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
2. `yandex_wordstat_forecast` - –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–∫–∞–∑–æ–≤
3. `yandex_wordstat_keywords` - –ü–æ–¥–±–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
4. `yandex_wordstat_region_stats` - –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
5. `yandex_wordstat_related` - –ü–æ—Ö–æ–∂–∏–µ –∑–∞–ø—Ä–æ—Å—ã

## üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

- `GET /yandex/auth` - –ü–æ–ª—É—á–∏—Ç—å URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `GET /yandex/callback` - Callback –¥–ª—è OAuth (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
- `POST /yandex/set-token` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤—Ä—É—á–Ω—É—é
- `GET /yandex/status` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å OAuth

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

- **Redirect URI –¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å** —Å —Ç–µ–º, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Yandex
- –¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç **1 –≥–æ–¥**
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

## üöÄ –ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å?

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ Railway –∑–∞–¥–µ–ø–ª–æ–∏—Ç
2. –û–±–Ω–æ–≤–∏—Ç–µ Redirect URI –≤ Yandex
3. –û—Ç–∫—Ä–æ–π—Ç–µ `/yandex/auth` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —è –¥–æ–±–∞–≤–ª—é Wordstat —Ñ—É–Ω–∫—Ü–∏–∏!

–ù–∞–ø–∏—à–∏—Ç–µ, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã! üí™
